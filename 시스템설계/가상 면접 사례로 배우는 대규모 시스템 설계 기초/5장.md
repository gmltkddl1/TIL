# 안정 해쉬
## 안정해쉬란 
- 캐시 서버가 추가되거나 제거될때 최대 재배치되는 키의 갯수가 최대 키의갯수/서버의 수인 방식
## 일반적 방식
- (키의 해쉬값 % 서버갯수)로 서버에 키를 분배하는 방식
- 단점
  - 서버가 추가되거나 삭제되면 키 대부분이 재분배 되어야한다.
## 안정 해쉬
- 해쉬 알고리즘으로 얻을수 있는 모든 해쉬 값의 시작과 끝을 연결한 링이라고 할때 key의 해쉬 값에서 시계 방향으로 이동하면서 가장 먼저 도착한 서버에 키를 배치한다.
<img width="894" height="564" alt="image" src="https://github.com/user-attachments/assets/c65d64ce-ef6c-4689-b136-cf40633e3546" />

### 장점
- 서버가 추가되거나 제거 되어도 일부만 재배치된다.
### 단점
- 해쉬 공간과 키가 캐시 서버에 균등하게 분배되지 않는다

## 단점 보완법
- 가상 노드
  - 서버 하나당 해쉬값을 하나만 저장하지 않고 여러개를 저장하여 기존 알고리즘을 적용하여 가상노드와 만나는 것도 해당 서버에 할당한다.
